<h2>{{header}}</h2>
<hr>

<ng-container *ngFor="let foodListing of foodListings; let i = index">
    <img *ngIf="foodListing.imgUrl != null" [src]="foodListing.imgUrl" class="food-listing-img">

    <div class="food-listing-contents" style="text-align:left;">
        <h5 class="link-content">
            <a (click)="showDetails(detailsHTML, i)" title="Click for Details">{{foodListing.foodTitle}}</a>
        </h5>

        <p>
            Donated By:
            <b *ngIf="foodListing.donorOrganizationName != null">
                {{foodListing.donorOrganizationName}}
            </b>
            <b *ngIf="foodListing.donorOrganizationName == null">
                {{foodListing.donorFirstName}} {{foodListing.donorLastName}}
            </b>
            <br>
            Present food types:
            <ng-container *ngFor="let foodType of foodListing.foodTypes; let i = index;">
                <b>
                    {{foodType}}<ng-container *ngIf="i !== (foodListing.foodTypes.length - 1)">,</ng-container>
                </b>
            </ng-container>
            <br>
            Available Until: <b>{{foodListing.availableUntilDate}}</b> <!--Requires a {{foodListing.quantityClass}}-->

            <ng-content select="[food-listing-info]"></ng-content>
        </p>
    </div>
    <hr>
</ng-container>


<ng-template #detailsHTML let-c="close" let-d="dismss">
    <div class="modal-header">
        <h4 class="modal-title">{{getSelectedFoodListing().foodTitle}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body">
        <img *ngIf="getSelectedFoodListing().imgUrl != null" [src]="getSelectedFoodListing().imgUrl"
         id="details-img" align="left" class="img-thumbnail modal-img">
        <p>
            Donated By:
            <b *ngIf="getSelectedFoodListing().donorOrganizationName != null">
                {{getSelectedFoodListing().donorOrganizationName}}
            </b>
            <b *ngIf="getSelectedFoodListing().donorOrganizationName == null">
                {{getSelectedFoodListing().donorFirstName}} {{getSelectedFoodListing().donorLastName}}
            </b>
            <br>

            Present food types:
            <ng-container *ngFor="let foodType of getSelectedFoodListing().foodTypes; let i = index;">
                <b>
                    {{foodType}}<ng-container *ngIf="i !== (getSelectedFoodListing().foodTypes.length - 1)">,</ng-container>
                </b>
            </ng-container>
            <br>

            Available Until: <b>{{getSelectedFoodListing().availableUntilDate}}</b> <!--Requires a {{foodListing.quantityClass}}-->
            <br>

            <ng-container *ngIf="getSelectedFoodListing().foodDescription != null">
                Description: <b>{{getSelectedFoodListing().foodDescription}}</b>
            </ng-container>
        </p>

        <ng-content select="[details-modal-body]"></ng-content>
    </div>
    
    <div class="modal-footer">
        <ng-content select="[details-modal-footer]"></ng-content>
        <button md-raised-button color="primary" class="button-md" (click)="c('Close')">Close</button>
    </div>
</ng-template>
