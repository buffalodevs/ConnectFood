<ng-template #detailsHTML let-c="close" let-d="dismss">

    <div class="modal-header">

        <h5 class="modal-title">{{foodListing.foodTitle}}</h5>
        <button type="button" class="modal-close" aria-label="Close" (click)="c('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
        
    </div>

    <div class="modal-body">

        <!-- Standard modal body -->
        <div *ngIf="!showConfirmDialog" class="food-listing-container">
    
            <!-- Image floating on left -->
            <div class="food-listing-img-container">
                <img *ngIf="foodListing.imgUrl != null" [src]="foodListing.imgUrl"/>
            </div>
    
            <!-- Description pushed to right of image -->
            <div [ngClass]="{ 'food-listing-contents': (foodListing.imgUrl != null) }" class="row">
    
                <!-- Donor Description (Column 1) -->
                <div class="col-lg-6 col-md-12" *ngIf="!isDonatedCart">

                    <div class="space-bottom">
                        <b>Donor Organization:</b>
                        <span class="inline-block">{{ foodListing.donorOrganizationName }}</span>
                    </div>

                    <div class="space-bottom">
                        <b class="inline-block">Donor Administrator:</b>
                        <span class="inline-block">{{ foodListing.donorFirstName }} {{ foodListing.donorLastName }}</span>
                    </div>

                    <div class="space-bottom">
                        <div class="inline-block">
                            <b>Donor Address:</b>
                        </div>
                        <div class="inline-block">
                            <span>{{ foodListing.donorOrganizationAddress }}</span><br>
                            <span>
                                {{ foodListing.donorOrganizationCity }}, {{ foodListing.donorOrganizationState }} {{ foodListing.donorOrganizationZip }}
                            </span>
                        </div>
                    </div>

                    <div class ="space-bottom" *ngIf="foodListing.donorDrivingDistance != null">
                        <b>Driving Distance:</b>
                        <span class="inline-block">{{ foodListing.donorDrivingDistance + ' miles' }}</span>
                    </div>

                    <div class="space-bottom">
                        <b>Donor Phone:</b>
                        <span class="inline-block">{{ foodListing.donorOrganizationPhone }}</span>
                    </div>

                </div>

                <!-- Misc Description (Column 2) -->
                <div class="col-lg-6 col-md-12">

                    <div class="space-bottom">
                        <b>Available Until:</b> {{ foodListing.availableUntilDate }}
                    </div>

                    <div class="space-bottom">
                        <b>Perishable:</b>
                        <i class="material-icons" *ngIf="foodListing.perishable" style="color:green">check</i>
                        <i class="material-icons" *ngIf="!foodListing.perishable" style="color:red">clear</i>
                        <span>{{ foodListing.perishable ? 'Yes' : 'No'}}</span>
                    </div>
                    
                    <div id="food-types-container" class="space-bottom">
                        <b>Present Food Types:</b><br>
                        <app-food-types [ngModel]="foodListing.foodTypes" [displayOnly]="true" [numColumns]="2"></app-food-types>
                    </div>

                    <!-- Units Counts Container -->
                    <div class="space-bottom">

                        <div *ngIf="!isClaimedCart">
                            <b>Available Count:</b>
                            <span class="inline-block">
                                {{ foodListing.availableUnitsCount }} of {{ foodListing.totalUnitsCount }} {{ foodListing.unitsLabel }}
                            </span>
                        </div>

                        <div *ngIf="isDonatedCart">
                            <b>Donor On-Hand Count:</b>
                            <span class="inline-block">
                                {{ foodListing.donorOnHandUnitsCount }} of {{ foodListing.totalUnitsCount }} {{ foodListing.unitsLabel }}
                            </span>
                        </div>

                        <div *ngIf="isClaimedCart">
                            <b>Claimed Count:</b>
                            <span class="inline-block">
                                {{ foodListing.myClaimedUnitsCount }} of
                                <!-- Instead of total units here, we have total units obtainable by this receiver -->
                                {{ foodListing.availableUnitsCount + foodListing.myClaimedUnitsCount }} {{ foodListing.unitsLabel }}
                            </span>
                        </div>

                    </div>

                </div>
    
                <ng-content select="[food-listing-info]"></ng-content>
            </div>

            <!-- Bottom full width description -->
            <div *ngIf="foodListing.foodDescription != null">
                <b>Description --</b><br>
                <span class="inline-block">{{ foodListing.foodDescription }}</span>
            </div>
    
        </div>

        <!-- Confirm modal body -->
        <ng-container *ngIf="showConfirmDialog">
            <ng-content select="[confirm-modal-body]"></ng-content>
        </ng-container>

    </div>
    
    <div class="modal-footer">
        
        <!-- Standard modal footer -->
        <ng-container *ngIf="!showConfirmDialog">
            <ng-content select="[details-modal-footer]"></ng-content>
        </ng-container>

        <!-- Confirm modal footer -->
        <ng-container *ngIf="showConfirmDialog">
            <ng-content select="[confirm-modal-footer]"></ng-content>
        </ng-container>

        <!-- Only close button is hard coded in dialog. All others are transcluded in from parent component -->
        <button md-raised-button color="primary" class="button-md" (click)="c('Close')">Close</button>

    </div>

</ng-template>
